<div class="container my-5 cart-wrapper">
  <h2 class="text-center mb-4">🛍 Your Shopping Cart</h2>

  <!-- Empty cart -->
  @if (cardService.getCarditem().length == 0) {
  <div class="alert alert-light text-center empty-cart">
    <h4 class="mb-3">Your cart is empty</h4>
    <a routerLink="/" class="btn btn-outline-success">🔙 Back to Shop</a>
  </div>
  }

  <!-- Cart Items -->
  @for (item of cardService.getCarditem(); track item.id) {
  <div class="cart-item d-flex align-items-center p-3 mb-3 shadow-sm rounded-3">
    <!-- Product Image -->
    <div class="flex-shrink-0">
      <img [src]="item.image" class="cart-img" alt="Sneakers" />
    </div>

    <!-- Product Info -->
    <div class="ms-3 flex-grow-1">
      <h6 class="mb-1">{{ item.title }}</h6>
      <small class="text-muted">{{ item.category }}</small><br />
      <span class="text-success fw-bold">{{ item.price | currency}}</span>
    </div>

    <!-- Quantity -->
    <div class="d-flex align-items-center me-3">
      <button
        class="btn btn-outline-secondary btn-sm rounded-circle"
        (click)="cardService.decrementqty(item)"
      >
        –
      </button>
      <input
        type="text"
        [value]="item.qty"
        class="form-control text-center mx-2 cart-qty-input"
        readonly
      />
      <button
        class="btn btn-outline-secondary btn-sm rounded-circle"
        (click)="cardService.incrementqty(item)"
      >
        +
      </button>
    </div>

    <!-- Total Price -->
    <div class="me-3 fw-bold text-success">
      {{ item.price * item.qty | currency}}
    </div>

    <!-- Actions -->
    <div class="d-flex align-items-center gap-2">
      <input
        class="form-check-input custom-checkbox"
        type="checkbox"
        [checked]="item.is_select"
        (change)="cardService.selectCarditem(item)"
      />
      <button
        class="btn btn-outline-danger btn-sm rounded-circle"
        (click)="cardService.removecarditem(item)"
      >
        🗑
      </button>
    </div>
  </div>
  }

  <!-- Cart Footer -->
  @if (cardService.getCarditem().length > 0) {
  <div class="cart-footer mt-4 p-3 border-top">
    <h4>
      Total:
      <span class="text-success fw-bold"
        >{{ cardService.getcardtotal() | currency }}</span
      >
    </h4>
    <button class="btn btn-success btn-lg w-100 mt-2" routerLink="/paynow">
      ✅ Check Out
    </button>
  </div>
  }
</div>
